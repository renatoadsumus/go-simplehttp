Script started on 2020-10-21 09:09:55-0300
]0;root@ip-10-1-1-100:/home/latamuser/go-simplehttp[?1034h[root@ip-10-1-1-100 go-simplehttp]# exit.s[K[K[K[K[K[K./script.sh 
Pausa 
Depois segundos.. 
]0;root@ip-10-1-1-100:/home/latamuser/go-simplehttp[root@ip-10-1-1-100 go-simplehttp]# rm -fr script.sh register_task_definition.sh [K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K
]0;root@ip-10-1-1-100:/home/latamuser/go-simplehttp[root@ip-10-1-1-100 go-simplehttp]# aws ecs list-services --region us-east-1 --cluster latam-ecs-sbx-cluster-ec2
{
    "serviceArns": []
}
]0;root@ip-10-1-1-100:/home/latamuser/go-simplehttp[root@ip-10-1-1-100 go-simplehttp]# vi scritp[Kp.sh
[?1049h[?1h=[?2004h[1;36r[?12h[?12l[27m[23m[29m[m[H[2J[?25l[36;1H"scritp.sh" [New File][2;1H[94m~                                                                                                                                                    [3;1H~                                                                                                                                                    [4;1H~                                                                                                                                                    [5;1H~                                                                                                                                                    [6;1H~                                                                                                                                                    [7;1H~                                                                                                                                                    [8;1H~                                                                                                                                                    [9;1H~                                                                                                                                                    [10;1H~                                                                                                                                                    [11;1H~                                                                                                                                                    [12;1H~                                                                                                                                                    [13;1H~                                                                                                                                                    [14;1H~                                                                                                                                                    [15;1H~                                                                                                                                                    [16;1H~                                                                                                                                                    [17;1H~                                                                                                                                                    [18;1H~                                                                                                                                                    [19;1H~                                                                                                                                                    [20;1H~                                                                                                                                                    [21;1H~                                                                                                                                                    [22;1H~                                                                                                                                                    [23;1H~                                                                                                                                                    [24;1H~                                                                                                                                                    [25;1H~                                                                                                                                                    [26;1H~                                                                                                                                                    [27;1H~                                                                                                                                                    [28;1H~                                                                                                                                                    [29;1H~                                                                                                                                                    [30;1H~                                                                                                                                                    [31;1H~                                                                                                                                                    [32;1H~                                                                                                                                                    [33;1H~                                                                                                                                                    [34;1H~                                                                                                                                                    [35;1H~                                                                                                                                                    [1;1H[?25h[?25l[m[36;1H[K[36;1H:[?2004h[?25hq![?25l[?2004l[36;1H[K[36;1H[?2004l[?1l>[?25h[?1049l]0;root@ip-10-1-1-100:/home/latamuser/go-simplehttp[root@ip-10-1-1-100 go-simplehttp]# vi scritp.shaws ecs list-services --region us-east-1 --cluster latam-ecs-sbx-cluster-ec2[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[Crm -fr script.sh[K[4P./script.sh [8Pexitaws --version[5Phelp--versionexit[K./script.sh [1@v[1@i[1@ [1P[1P
[?1049h[?1h=[?2004h[1;36r[?12h[?12l[27m[23m[29m[m[H[2J[?25l[36;1H"script.sh" [New File][2;1H[94m~                                                                                                                                                    [3;1H~                                                                                                                                                    [4;1H~                                                                                                                                                    [5;1H~                                                                                                                                                    [6;1H~                                                                                                                                                    [7;1H~                                                                                                                                                    [8;1H~                                                                                                                                                    [9;1H~                                                                                                                                                    [10;1H~                                                                                                                                                    [11;1H~                                                                                                                                                    [12;1H~                                                                                                                                                    [13;1H~                                                                                                                                                    [14;1H~                                                                                                                                                    [15;1H~                                                                                                                                                    [16;1H~                                                                                                                                                    [17;1H~                                                                                                                                                    [18;1H~                                                                                                                                                    [19;1H~                                                                                                                                                    [20;1H~                                                                                                                                                    [21;1H~                                                                                                                                                    [22;1H~                                                                                                                                                    [23;1H~                                                                                                                                                    [24;1H~                                                                                                                                                    [25;1H~                                                                                                                                                    [26;1H~                                                                                                                                                    [27;1H~                                                                                                                                                    [28;1H~                                                                                                                                                    [29;1H~                                                                                                                                                    [30;1H~                                                                                                                                                    [31;1H~                                                                                                                                                    [32;1H~                                                                                                                                                    [33;1H~                                                                                                                                                    [34;1H~                                                                                                                                                    [35;1H~                                                                                                                                                    [1;1H[?25h[?25l[m[36;1H[1m-- INSERT --[m[36;13H[K[1;1H[?25h[?25l#!/bin/bash[2;1H[K[3;1Hset -e [3;8H[K[4;1H[K[5;1HSERVICE_PARA_CLUSTER=$(aws ecs list-servi[5;42H[K[5;42H[?25h[?25lces --region us-east-1 --cluster latam-ecs-sbx-cluster-ec2| jq --ra[?25h[?25lw-output '.serviceArns')[6;1H[K[7;1Hecho "Retorno Query Servico:  " $SERVICE[7;41H[K[7;41H[?25h[?25l_PARA_CLUSTER[8;1H[K[9;1Hsleep 5[9;8H[K[10;1H[K[11;1Hif [[ "$SERVICE_PARA_CLUSTER" != " [] " ][11;42H[K[11;42H[?25h[?25l]
then[12;5H[K[13;1H  echo "NAO EXISTE"[13;20H[K[14;1Helse    [14;9H[K[15;1H  echo "EXISTE"[15;16H[K[16;1Hfi[16;3H[K[16;3H[?25h[36;1H[K[16;2H[?25l[?25h[?25l[36;1H:[?2004h[?25hwq![?25l[?2004l"script.sh" [New] 16L, 316C written
[?2004l[?1l>[?25h[?1049l]0;root@ip-10-1-1-100:/home/latamuser/go-simplehttp[root@ip-10-1-1-100 go-simplehttp]# vi script.sh [1Ptp.shaws ecs list-services --region us-east-1 --cluster latam-ecs-sbx-cluster-ec2[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[Crm -fr script.sh[K[4P./script.sh [8Pexitaws --version[5Phelppip install --upgrade awscli[11Pyum install jq -yls /usr/local/bin/ecs-cli[8Pecs-cli --version^C
]0;root@ip-10-1-1-100:/home/latamuser/go-simplehttp[root@ip-10-1-1-100 go-simplehttp]# chmod +x script.sh i[K
]0;root@ip-10-1-1-100:/home/latamuser/go-simplehttp[root@ip-10-1-1-100 go-simplehttp]# chmod +x script.sh [6Pvi[C[C[C[C[C[C[C[C[C[C[C[1Ptp.shaws ecs list-services --region us-east-1 --cluster latam-ecs-sbx-cluster-ec2[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[Crm -fr script.sh[K[4P./script.sh 
Retorno Query Servico:   []
NAO EXISTE
]0;root@ip-10-1-1-100:/home/latamuser/go-simplehttp[root@ip-10-1-1-100 go-simplehttp]# ./script.sh [7@chmod +x [C[C[C[C[C[C[C[C[C[C[6Pvi[C[C[C[C[C[C[C[C[C[C[C[1Ptp.shaws ecs list-services --region us-east-1 --cluster latam-ecs-sbx-cluster-ec2
{
    "serviceArns": []
}
]0;root@ip-10-1-1-100:/home/latamuser/go-simplehttp[root@ip-10-1-1-100 go-simplehttp]# aws ecs list-services --region us-east-1 --cluster latam-ecs-sbx-cluster-ec2[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C./script.sh [K[7@chmod +x [C[C[C[C[C[C[C[C[C[C[6Pvi[C[C[C[C[C[C[C[C[C[C[C
[?1049h[?1h=[?2004h[1;36r[?12h[?12l[27m[23m[29m[m[H[2J[?25l[36;1H"script.sh" 16L, 316C[1;1H#!/bin/bash

set -e

SERVICE_PARA_CLUSTER=$(aws ecs list-services --region us-east-1 --cluster latam-ecs-sbx-cluster-ec2| jq --raw-output '.serviceArns')

echo "Retorno Query Servico:  " $SERVICE_PARA_CLUSTER

sleep 5

if [[ "$SERVICE_PARA_CLUSTER" != " [] " ]]
then
  echo "NAO EXISTE"
else
  echo "EXISTE"
fi
[94m~                                                                                                                                                    [18;1H~                                                                                                                                                    [19;1H~                                                                                                                                                    [20;1H~                                                                                                                                                    [21;1H~                                                                                                                                                    [22;1H~                                                                                                                                                    [23;1H~                                                                                                                                                    [24;1H~                                                                                                                                                    [25;1H~                                                                                                                                                    [26;1H~                                                                                                                                                    [27;1H~                                                                                                                                                    [28;1H~                                                                                                                                                    [29;1H~                                                                                                                                                    [30;1H~                                                                                                                                                    [31;1H~                                                                                                                                                    [32;1H~                                                                                                                                                    [33;1H~                                                                                                                                                    [34;1H~                                                                                                                                                    [35;1H~                                                                                                                                                    [1;1H[?25h









[mif [[ "$SERVICE_PARA_CLUSTER" [?25l[36;1H[1m-- INSERT --[m[36;13H[K[11;31H[?25h[?25l=!= " [] " ]][11;32H[?25h[?25l= " [] " ][11;43H[K[11;32H[?25h[36;1H[K[11;31H[?25l[?25h[?25l[36;1H:[?2004h[?25hwq![?25l[?2004l"script.sh" 16L, 316C written
[?2004l[?1l>[?25h[?1049l]0;root@ip-10-1-1-100:/home/latamuser/go-simplehttp[root@ip-10-1-1-100 go-simplehttp]# vi script.sh aws ecs list-services --region us-east-1 --cluster latam-ecs-sbx-cluster-ec2[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C./script.sh [K
Retorno Query Servico:   []
EXISTE
]0;root@ip-10-1-1-100:/home/latamuser/go-simplehttp[root@ip-10-1-1-100 go-simplehttp]# ./script.sh [1@vi [C[C[C[C[C[C[C[C[C[C
[?1049h[?1h=[?2004h[1;36r[?12h[?12l[27m[23m[29m[m[H[2J[?25l[36;1H"script.sh" 16L, 316C[1;1H#!/bin/bash

set -e

SERVICE_PARA_CLUSTER=$(aws ecs list-services --region us-east-1 --cluster latam-ecs-sbx-cluster-ec2| jq --raw-output '.serviceArns')

echo "Retorno Query Servico:  " $SERVICE_PARA_CLUSTER

sleep 5

if [[ "$SERVICE_PARA_CLUSTER" == " [] " ]]
then
  echo "NAO EXISTE"
else
  echo "EXISTE"
fi
[94m~                                                                                                                                                    [18;1H~                                                                                                                                                    [19;1H~                                                                                                                                                    [20;1H~                                                                                                                                                    [21;1H~                                                                                                                                                    [22;1H~                                                                                                                                                    [23;1H~                                                                                                                                                    [24;1H~                                                                                                                                                    [25;1H~                                                                                                                                                    [26;1H~                                                                                                                                                    [27;1H~                                                                                                                                                    [28;1H~                                                                                                                                                    [29;1H~                                                                                                                                                    [30;1H~                                                                                                                                                    [31;1H~                                                                                                                                                    [32;1H~                                                                                                                                                    [33;1H~                                                                                                                                                    [34;1H~                                                                                                                                                    [35;1H~                                                                                                                                                    [1;1H[?25h







[?25l[9;35r[m[35;1H
[1;36r[35;1H[94m~                                                                                                                                                    [m[36;1H[K[9;1H[?25h
[41C[?25l" ][10;42H[K[10;38H[?25h"[?25l[]" ][10;41H[K[10;35H[?25h[?25l[36;1H:[?2004h[?25hwq![?25l[?2004l"script.sh" 15L, 306C written
[?2004l[?1l>[?25h[?1049l]0;root@ip-10-1-1-100:/home/latamuser/go-simplehttp[root@ip-10-1-1-100 go-simplehttp]# vi script.sh [1P./[C[C[C[C[C[C[C[C[C[C
Retorno Query Servico:   []
NAO EXISTE
]0;root@ip-10-1-1-100:/home/latamuser/go-simplehttp[root@ip-10-1-1-100 go-simplehttp]# ./script.sh [1@vi [C[C[C[C[C[C[C[C[C[C
[?1049h[?1h=[?2004h[1;36r[?12h[?12l[27m[23m[29m[m[H[2J[?25l[36;1H"script.sh" 15L, 306C[1;1H#!/bin/bash

set -e

SERVICE_PARA_CLUSTER=$(aws ecs list-services --region us-east-1 --cluster latam-ecs-sbx-cluster-ec2| jq --raw-output '.serviceArns')

echo "Retorno Query Servico:  " $SERVICE_PARA_CLUSTER


if [[ "$SERVICE_PARA_CLUSTER" == "[]" ]]
then
  echo "NAO EXISTE"
else
  echo "EXISTE"
fi
[94m~                                                                                                                                                    [17;1H~                                                                                                                                                    [18;1H~                                                                                                                                                    [19;1H~                                                                                                                                                    [20;1H~                                                                                                                                                    [21;1H~                                                                                                                                                    [22;1H~                                                                                                                                                    [23;1H~                                                                                                                                                    [24;1H~                                                                                                                                                    [25;1H~                                                                                                                                                    [26;1H~                                                                                                                                                    [27;1H~                                                                                                                                                    [28;1H~                                                                                                                                                    [29;1H~                                                                                                                                                    [30;1H~                                                                                                                                                    [31;1H~                                                                                                                                                    [32;1H~                                                                                                                                                    [33;1H~                                                                                                                                                    [34;1H~                                                                                                                                                    [35;1H~                                                                                                                                                    [1;1H[?25h[?25l[m[36;1H[K[36;1H:[?2004h[?25hq![?25l[?2004l[36;1H[K[36;1H[?2004l[?1l>[?25h[?1049l]0;root@ip-10-1-1-100:/home/latamuser/go-simplehttp[root@ip-10-1-1-100 go-simplehttp]# rm -fr script.sh 
]0;root@ip-10-1-1-100:/home/latamuser/go-simplehttp[root@ip-10-1-1-100 go-simplehttp]# vi register_task_definition.sh 
[?1049h[?1h=[?2004h[1;36r[?12h[?12l[27m[23m[29m[m[H[2J[?25l[36;1H"register_task_definition.sh" 28L, 1089C[1;1H#!/bin/bash

set -e


export TASK_VERSION=$(aws ecs register-task-definition --region us-east-1 --cli-input-json file://container-definitions.json | jq --raw-output '.taskk[7;1HDefinition.revision')

echo "Registered ECS Task Definition: " $TASK_VERSION

export SERVICE_PARA_CLUSTER=$(aws ecs list-services --region us-east-1 --cluster $CLUSTER_NAME| jq --raw-output '.serviceArns')

echo "Registered ECS Task Definition: " $TASK_VERSION

sleep 5

if [[ "$SERVICE_PARA_CLUSTER" != " [] " ]]
then[19;9Hecho "Service Already Existing: " $SERVICE_NAME[20;9Hecho "Deployment of $DEPLOYED_SERVICE complete"[21;9HDEPLOYED_SERVICE=$(aws ecs update-service --region us-east-1 --cluster $CLUSTER_NAME --service $SERVICE_NAME --task-definition $TASK_FAMILY:$$[22;1HTASK_VERSION | jq --raw-output '.service.serviceName')

else[25;9Hsed -i 's/TD_VERSION/$TASK_VERSION/' servive-definitions.json[26;9Hecho "All Services Existing: " $SERVICE_PARA_CLUSTER[27;9Hecho "New Created Service: " $SERVICE_NAME[28;9Hsleep 15[29;9Haws ecs create-service --region us-east-1 --cli-input-json file://servive-definitions.json
fi
[94m~                                                                                                                                                    [32;1H~                                                                                                                                                    [33;1H~                                                                                                                                                    [34;1H~                                                                                                                                                    [35;1H~                                                                                                                                                    [1;1H[?25h[?25l[m[1;1H[K[2;1H[94m~                                                                                                                                                    [3;1H~                                                                                                                                                    [4;1H~                                                                                                                                                    [5;1H~                                                                                                                                                    [6;1H~                                                                                                                                                    [7;1H~                                                                                                                                                    [8;1H~                                                                                                                                                    [9;1H~                                                                                                                                                    [10;1H~                                                                                                                                                    [11;1H~                                                                                                                                                    [12;1H~                                                                                                                                                    [13;1H~                                                                                                                                                    [14;1H~                                                                                                                                                    [15;1H~                                                                                                                                                    [16;1H~                                                                                                                                                    [17;1H~                                                                                                                                                    [18;1H~                                                                                                                                                    [19;1H~                                                                                                                                                    [20;1H~                                                                                                                                                    [21;1H~                                                                                                                                                    [22;1H~                                                                                                                                                    [23;1H~                                                                                                                                                    [24;1H~                                                                                                                                                    [25;1H~                                                                                                                                                    [26;1H~                                                                                                                                                    [27;1H~                                                                                                                                                    [28;1H~                                                                                                                                                    [29;1H~                                                                                                                                                    [30;1H~                                                                                                                                                    [m[36;1H--No lines in buffer--[36;23H[K[1;1H[?25h[?25l[36;1H[1m-- INSERT --[m[36;13H[K[1;1H[?25h[?25l#!/bin/bash[2;1H[K[3;1Hset -e[3;7H[K[4;1H[K[5;1H[K[6;1Hexport TASK_VERSION=$(aws ecs register-t[6;41H[K[6;41H[?25h[?25lask-definition --region us-east-1 --cli-input-json file://containe[?25h[?25lr-definitions.json | jq --raw-output '.taskk[7;1HDefinition.revision')[7;22H[K[8;1H[K[8;1H[?25h[?25l
echo "Registered ECS Task Definition: " $TASK_VERSION[9;54H[K[10;1H[K[11;1Hexport S[11;9H[K[11;9H[?25h[?25lERVICE_PARA_CLUSTER=$(aws ecs list-services --region us-east-1 -[?25h[?25l-cluster $CLUSTER_NAME| jq --raw-output '.serviceArns')[12;1H[K[13;1Hecho "R[13;8H[K[13;8H[?25h[?25legistered ECS Task Definition: " $TASK_VERSION[14;1H[K[15;1Hsleep 5[15;8H[K[16;1H[K[17;1Hif [[ [17;7H[K[17;7H[?25h[?25l"$SERVICE_PARA_CLUSTER" == "[]" ]]
then     [18;10H[K[19;1H        echo "New Created Se[19;29H[K[19;29H[?25h[?25lrvice: " $SERVICE_NAME
        sed -i 's/TD_VERSION/${TASK_VERSION}/[20;46H[K[20;46H[?25h[?25l' servive-definitions.json
        sleep 10[21;17H[K[22;1H        aws ecs create-service --[22;34H[K[22;34H[?25h[?25lregion us-east-1 --cli-input-json file://servive-definitions.js[?25h[?25lon
else    [23;9H[K[24;1H    echo "Service Already Existing: " $SERVICE_NAM[24;51H[K[24;51H[?25h[?25lE
        DEPLOYED_SERVICE=$(aws ecs update-service --region us-east[25;67H[K[25;67H[?25h[?25l-1 --cluster $CLUSTER_NAME --service $SERVICE_NAME --task-defin[?25h[?25lition $TASK_FAMILY:$$[26;1HTASK_VERSION | jq --raw-output '.service.se[26;44H[K[26;44H[?25h[?25lrviceName')
        echo "Deployment of $DEPLOYED_SERVICE complete" [27;57H[K[28;1H        [28;9H[K[28;9H[?25h[?25lecho "All Services Existing: " $SERVICE_PARA_CLUSTER
fi[29;3H[K[29;3H[?25h[36;1H[K[29;2H[?25l[?25h[?25l[36;1H:[?2004h[?25hwq![?25l[?2004l"register_task_definition.sh" 27L, 1071C written
[?2004l[?1l>[?25h[?1049l]0;root@ip-10-1-1-100:/home/latamuser/go-simplehttp[root@ip-10-1-1-100 go-simplehttp]# vi register_task_definition.sh [14Prm -fr script[C[C[C[C[4Pvi[C[C[C[C[C[C[C[C[C[C[C[1P./[C[C[C[C[C[C[C[C[C[C[1@vi [C[C[C[C[C[C[C[C[C[C^C
]0;root@ip-10-1-1-100:/home/latamuser/go-simplehttp[root@ip-10-1-1-100 go-simplehttp]# git cm[Kommit -am"De[K[KCorrecao O[KIF b[Kno script para ter[K[K[Kretorno de todos os servicos"
[aws 352fc45] Correcao IF no script para retorno de todos os servicos
 Committer: root <root@ip-10-1-1-100.ec2.internal>
Your name and email address were configured automatically based
on your username and hostname. Please check that they are accurate.
You can suppress this message by setting them explicitly. Run the
following command and follow the instructions in your editor to edit
your configuration file:

    git config --global -